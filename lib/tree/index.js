module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-container"},[n("div",{staticClass:"tree-body"},e._l(e.stateTree,function(t,o){return n("tree-node",{key:o,attrs:{"img-source":e.imgSource,"node-data":t,"value-key":e.valueKey,"label-key":e.labelKey,"show-checkbox":e.showCheckbox,"show-tip":e.showTip}})}),1)])},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-node-container"},[n("ul",{style:"padding-left:"+(e.showLine&&e.children&&e.children.length?20:8)+"px"},[n("li",[e.children&&e.children.length?n("span",{staticClass:"tree-arrow point-cursor",on:{click:function(t){return t.stopPropagation(),e.toggleExpand(t)}}},[e.imgSource.right&&e.imgSource.down?n("img",{attrs:{width:"18",height:"18",src:e.imgSource[e.arrowType],alt:""}}):e._e()]):n("span",{staticClass:"tree-arrow"}),e._v(" "),e.showCheckbox?n("span",[n("input",{staticClass:"tree-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.nodeData.checked},on:{change:function(t){return t.stopPropagation(),e.handleCheck(t)}}})]):e._e(),e._v(" "),n("span",{class:e.labelClasses,style:e.showTip?"width:calc(100% - 40px)":"",on:{click:function(t){return t.stopPropagation(),e.handleSelect(t)}}},[e.imgSource.node&&e.imgSource.leaf?n("img",{staticClass:"label-icon",attrs:{width:"18",height:"18",src:e.children&&e.children.length?e.imgSource.node:e.imgSource.leaf,alt:""}}):e._e(),e._v(" "),n("label",[e._v("\n           "+e._s(e.nodeData[e.labelKey])+"\n         ")])]),e._v(" "),e._l(e.children,function(t,o){return n("tree-node",{directives:[{name:"show",rawName:"v-show",value:e.nodeData.expand,expression:"nodeData.expand"}],key:o,attrs:{"show-tip":e.showTip,"img-source":e.imgSource,"show-checkbox":e.showCheckbox,"node-data":t,"label-key":e.labelKey}})})],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showLine,expression:"showLine"}],staticClass:"tree-line-left"}),e._v(" "),e.nodeData.hasParent?n("div",{directives:[{name:"show",rawName:"v-show",value:e.showLine,expression:"showLine"}],staticClass:"tree-line-bottom"}):e._e()])])};i._withStripped=o._withStripped=!0;var a={methods:{dispatch:function(e,t,n){for(var o=this.$parent||this.$root,i=o.$options.name;o&&(!i||i!==e);)(o=o.$parent)&&(i=o.$options.name);o&&o.$emit.apply(o,[t].concat(n))},broadcast:function(e,t,n){(function e(t,n,o){(void 0).$children.forEach(function(i){i.$options.name===t?i.$emit.apply(i,[n].concat(o)):e.apply(i,[t,n].concat([o]))})}).call(this,e,t,n)}}};function s(e,t,n,o,i,a,s,r){var c,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),o&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=c):i&&(c=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(e,t){return c.call(t),l(e,t)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:d}}var r=s({name:"TreeNode",mixins:[a],props:{showTip:{type:Boolean},showLine:{type:Boolean,default:!1},nodeData:{type:Object,default:function(){return{}}},imgSource:{type:Object,default:function(){return{}}},showCheckbox:{type:Boolean,default:!1},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"}},data:function(){return{checked:!!getType(this.nodeData.checked,"Boolean")&&this.nodeData.checked}},computed:{children:function(){return this.nodeData[this.childrenKey]},arrowType:function(){return this.nodeData.expand?"down":"right"},labelClasses:function(){return"node-label node-hover point-cursor  ".concat(this.nodeData.selected&&!this.showCheckbox?"node-label-active":"")}},methods:{handleCheck:function(){var e={checked:!this.nodeData.checked,nodeKey:this.nodeData.nodeKey};this.dispatch("Tree","on-check",e)},handleSelect:function(){this.showCheckbox||this.dispatch("Tree","on-select",this.nodeData)},toggleExpand:function(e){this.nodeData[this.childrenKey]&&this.nodeData[this.childrenKey].length&&(this.$set(this.nodeData,"expand",!this.nodeData.expand),this.dispatch("Tree","toggle-expand",this.nodeData))}}},i,[],!1,null,null,null);r.options.__file="src/components/tree/src/TreeNode.vue";var c=r.exports;window.getType=function(e,t){return Object.prototype.toString.call(e).includes("".concat(t.slice(1)))};var d={name:"Tree",components:{TreeNode:c},mixins:[a],props:{value:{type:String},dataSource:{type:Array,default:function(){return[]}},showTip:{type:Boolean,default:!0},imgSource:{type:Object,default:function(){return{}}},onlyLeaf:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},type:{type:String,default:"select"},showCheckbox:{type:Boolean,default:!1},labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},childrenKey:{type:String,default:"children"}},data:function(){return{stateTree:this.dataSource,showTree:"select"!==this.type,selectedNodes:[],checkedNodes:[]}},watch:{value:"setNodesPoperty",dataSource:{handler:function(){this.initDataSource()}}},created:function(){this.$on("on-select",this.handleSelect),this.$on("on-check",this.handleCheck),this.$on("toggle-expand",this.handleExpand),this.initDataSource()},methods:{initDataSource:function(){getType(this.dataSource,"Array")&&this.dataSource.length&&(this.stateTree=this.dataSource,this.setFlatState())},setFlatState:function(){var e=this,t=[],n=0,o=this.childrenKey;this.showCheckbox,this.multiple,this.dataSource.forEach(function(i){return function i(a,s){a.nodeKey=n++,getType(a.expand,"undefined")&&e.$set(a,"expand",Boolean(a.expand)),t[a.nodeKey]={node:a,nodeKey:a.nodeKey},a.hasParent=!getType(s,"Undefined"),s&&(t[a.nodeKey].parentKey=s.nodeKey,t[s.nodeKey][o].push(a.nodeKey)),a[o]&&a[o].length?(t[a.nodeKey][o]=[],a[o].forEach(function(e){return i(e,a)})):a.isLeafNode=!0}(i)}),this.flatState=t,this.setNodesPoperty()},setNodesPoperty:function(){var e=this,t=this.getCurrentNodes(),n=t._value;if(t._label,this.value===n)return!1;this.value&&this.value.length&&(this.clearAllNodes(),this.showCheckbox?(this.value.split(",").forEach(function(t){var n=e.setNodeBySearchValue(t,"checked",!0);if(n){var o={checked:!0,nodeKey:n.nodeKey};e.updateCheckedNodesPoperty(o)}}),this.checkedNodes=this.getCheckedNodes()):(this.value.split(",").forEach(function(t){e.setNodeBySearchValue(t,"selected",!0)}),this.selectedNodes=this.getSelectedNodes()),this.setModelValue())},clearAllNodes:function(){var e=this.showCheckbox?"checked":"selected";this.setAllNodesState(e,!1),this["".concat(e,"Nodes")]=[]},rebootTree:function(){this.clearAllNodes(),this.setModelValue()},findNodeByKeyValue:function(e,t){var n=this.flatState;if(n)return n.find(function(n){return n.node[e]===t})},setNodeBySearchValue:function(e,t,n){var o=this.findNodeByKeyValue(this.valueKey,e);if(o)return this.$set(o.node,t,n),o},getCurrentNodes:function(){var e=this.selectedNodes,t=this.showCheckbox,n=this.onlyLeaf,o=this.checkedNodes,i=this.valueKey,a=this.labelKey,s=(this.value,this.flatState,o.filter(function(e){return e.isLeafNode})),r=t?n?s:o:e,c=r.map(function(e){return e[a]}).join(",");return{_value:i?r.map(function(e){return e[i]}).join(","):r,_label:c,_curNodes:r}},handleExpand:function(e){this.$emit("on-toggle-expand",e)},handleCheck:function(e){this.updateCheckedNodesPoperty(e),this.setModelValue()},updateCheckedNodesPoperty:function(e){var t=e.checked,n=e.nodeKey,o=this.flatState[n].node;this.$set(o,"checked",t),this.updateParentNodes(n),this.updateChildrenNodes(o,this.childrenKey,t),this.checkedNodes=this.getCheckedNodes()},updateParentNodes:function(e){var t=this.flatState[e],n=t.parentKey;if(t.node,getType(n,"Number")){var o=this.flatState[n].node,i=o[this.childrenKey].every(function(e){return e.checked});this.$set(o,"checked",i),this.updateParentNodes(n)}},updateChildrenNodes:function(e,t,n){var o=this;e[t]&&e[t].length&&e[t].forEach(function(e){o.$set(e,"checked",n),o.updateChildrenNodes(e,t,n)})},handleSelect:function(e){var t=e.nodeKey,n=this.flatState[t],o=n.node;n.parentKey,this.multiple||this.setAllNodesState("selected",!1),this.$set(o,"selected",!o.selected),this.selectedNodes=this.getSelectedNodes(),this.setModelValue()},setModelValue:function(){var e=this.getCurrentNodes(),t=e._value,n=(e._label,e._curNodes,this.showCheckbox);this.flatState&&(this.$emit("input",t),n?this.$emit("on-check-change",this.getCheckedNodes()):this.$emit("on-select-change",this.getSelectedNodes()))},setAllNodesState:function(e,t){var n=this;this.flatState.filter(function(t){return t.node[e]}).map(function(e){return e.node}).forEach(function(o){n.$set(o,e,t)})},getSelectedNodes:function(){return this.flatState.filter(function(e){return e.node.selected}).map(function(e){return e.node})},getCheckedNodes:function(){return this.flatState.filter(function(e){return e.node.checked}).map(function(e){return e.node})}}},l=(n(2),s(d,o,[],!1,null,null,null));l.options.__file="src/components/tree/src/Tree.vue";var h=l.exports;h.install=function(e){e.component(h.name,h)},t.default=h},function(e,t,n){"use strict";var o=n(0);n.n(o).a}]);