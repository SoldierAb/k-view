!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,function(){return o={},r.m=n={0:function(t,e,n){"use strict";function o(t,e,n,o,r,i,s,a){var u,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=u):r&&(u=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(t,e){return u.call(e),c(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:l}}n.d(e,"a",function(){return o})},2:function(t,e,n){"use strict";var i=void 0;e.a={methods:{dispatch:function(t,e,n){for(var o=this.$parent||this.$root,r=o.$options.name;o&&(!r||r!==t);)(o=o.$parent)&&(r=o.$options.name);o&&o.$emit.apply(o,[e].concat(n))},broadcast:function(t,e,n){(function e(n,o,r){i.$children.forEach(function(t){t.$options.name===n?t.$emit.apply(t,[o].concat(r)):e.apply(t,[n,o].concat([r]))})}).call(this,t,e,n)}}}},24:function(t,e,n){},68:function(t,e,n){"use strict";var o=n(24);n.n(o).a},70:function(t,e,n){"use strict";n.r(e);function o(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-btn-container"},[n("div",{staticClass:"upload-btn-box"},[n("label",[t._v("上传文件")]),t._v(" "),n("input",{ref:"inputUpload",staticClass:"upload-btn",attrs:{type:"file",multiple:t.multiple},on:{change:t.handleChange}})]),t._v(" "),t._t("default")],2)}o._withStripped=!0;var u=function(t,e,n,o){var r="fail to ".concat(o," ").concat(t," ").concat(n.status),i=new Error(r);return i.status=n.status,i.method=o,i.url=t,i},l=function(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}},r=function(e,t){var n=1<arguments.length&&void 0!==t?t:"post";if("undefined"!=typeof XMLHttpRequest){var o=new XMLHttpRequest,r=e.action;o.upload&&(o.upload.onprogress=function(t){0<t.total&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var i=new FormData;e.data&&Object.keys(e.data).map(function(t){i.append(t,e.data[t])}),e.filename&&e.file&&i.append(e.filename,e.file),o.onerror=function(t){e.onError(t)},o.onload=function(){if(o.status<200||300<=o.status)return e.onError(u(r,e,o,n),l(o));e.onSuccess(l(o))},o.open(n,r,!0),e.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);var s=e.headers||{};for(var a in s)s.hasOwnProperty(a)&&null!==s[a]&&o.setRequestHeader(a,s[a]);o.send(i)}},i={name:"KUploadBtn",mixins:[n(2).a],props:{multiple:{type:Boolean,default:function(){return!1}},headers:{type:Object,default:function(){return{}}},fileName:{type:String,default:"file"},data:{type:Object,default:function(){return{}}},url:{type:String,require:!0,default:function(){return""}},withCredentials:{type:Boolean,default:!1},beforeUpload:{type:Function,default:function(){return{}}},onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}}},data:function(){return{fileList:[],markId:0}},methods:{handleChange:function(t){var e=t.target.files;e&&(this.setFiles(e),this.$refs.inputUpload.value=null)},setFiles:function(t){var e=this,n=Array.prototype.slice.call(t);this.multiple||(n=n.slice(0,1)),0!==n.length&&(this.url||this.$emit("get-file",this.fileName,this.multiple?n:n[0]),n.forEach(function(t){e.upload(t)}))},upload:function(e){var n=this;if(!this.beforeUpload)return this.post(e);var t=this.beforeUpload(this.fileName,e);t&&t.then?t.then(function(t){"[object File]"===Object.prototype.toString.call(t)?n.post(t):n.post(e)},function(){}):!1!==t&&this.post(e)},setFilelist:function(t){t.markId=this.markId++,t.status="uploading",this.fileList.push(t)},post:function(n){var o=this;this.setFilelist(n),this.url&&r({headers:this.headers,withCredentials:this.withCredentials,file:n,data:this.data,filename:this.fileName,action:this.url,onProgress:function(t){o.handleProgress(t,n)},onSuccess:function(t){o.handleSuccess(t,n)},onError:function(t,e){o.handleError(t,e,n)}})},handleProgress:function(t,e){t.percent;this.onProgress(t,e,this.fileList)},handleSuccess:function(t,e){var n=e.markId;this.fileList[n]&&(this.fileList[n].status=e.status="success",this.onSuccess(t,e,this.fileList))},handleError:function(t,e,n){this.onError(t,e,n,this.fileList)}}},s=(n(68),n(0)),a=Object(s.a)(i,o,[],!1,null,null,null);a.options.__file="src/components/upload-btn/src/UploadBtn.vue";var c=a.exports;c.install=function(t){t.component(c.name,c)};e.default=c}},r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="../lib/",r(r.s=70);function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});